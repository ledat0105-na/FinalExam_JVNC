<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Cập Nhật Hồ Sơ | UCOP</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link th:href="@{/css/style.css}" rel="stylesheet">
</head>

<body>
    <!-- Navbar -->
    <div th:replace="~{fragments/navbar :: navbar}"></div>

    <div class="container d-flex flex-column justify-content-center py-5" style="min-height: 80vh;">
        <div class="row justify-content-center">
            <div class="col-lg-8">

                <!-- Back Link -->
                <div class="mb-4">
                    <a th:href="@{/customer/dashboard}" class="text-decoration-none text-muted fw-medium">
                        <i class="bi bi-arrow-left me-1"></i> Quay lại Dashboard
                    </a>
                </div>

                <div class="card border-0 shadow-lg rounded-4 overflow-hidden">
                    <div class="row g-0">
                        <!-- Profile Header/Sidebar (Optional visualization) -->
                        <div
                            class="col-md-4 bg-light d-flex flex-column align-items-center justify-content-center p-4 text-center border-end">
                            <div class="mb-3 position-relative">
                                <div class="bg-primary bg-opacity-10 text-primary rounded-circle d-flex align-items-center justify-content-center overflow-hidden"
                                    style="width: 120px; height: 120px;">
                                    <i class="bi bi-person-fill" style="font-size: 5rem;"></i>
                                    <!-- Future: <img src="..." alt="Avatar" class="w-100 h-100 object-fit-cover"> -->
                                </div>
                                <div class="position-absolute bottom-0 end-0 bg-white rounded-circle p-1 shadow-sm border"
                                    style="cursor: pointer;">
                                    <i class="bi bi-camera-fill text-muted p-1"></i>
                                </div>
                            </div>
                            <h5 class="fw-bold text-dark mb-1" th:text="${profile.username}">Username</h5>
                            <p class="text-muted small mb-0" th:text="${profile.email}">email@example.com</p>
                        </div>

                        <!-- Form Section -->
                        <div class="col-md-8">
                            <div class="card-body p-4 p-lg-5">
                                <h4 class="fw-bold mb-4">Cập Nhật Thông Tin</h4>

                                <!-- Alerts -->
                                <div th:if="${success}"
                                    class="alert alert-success d-flex align-items-center rounded-3 mb-4 py-2 small"
                                    role="alert">
                                    <i class="bi bi-check-circle-fill me-2"></i>
                                    <span th:text="${success}">Success</span>
                                </div>
                                <div th:if="${error}"
                                    class="alert alert-danger d-flex align-items-center rounded-3 mb-4 py-2 small"
                                    role="alert">
                                    <i class="bi bi-exclamation-triangle-fill me-2"></i>
                                    <span th:text="${error}">Error</span>
                                </div>

                                <form th:action="@{/customer/profile}" th:object="${profile}" method="post">

                                    <!-- Hidden / Read-only fields -->
                                    <input type="hidden" th:field="*{username}" />
                                    <input type="hidden" th:field="*{email}" />

                                    <div class="row g-3">
                                        <div class="col-12">
                                            <label class="form-label fw-medium text-secondary small">Họ và Tên</label>
                                            <input type="text" class="form-control bg-light" th:field="*{fullName}"
                                                required />
                                        </div>

                                        <div class="col-md-6">
                                            <label class="form-label fw-medium text-secondary small">Số điện
                                                thoại</label>
                                            <input type="text" class="form-control bg-light"
                                                th:field="*{phoneNumber}" />
                                        </div>

                                        <div class="col-md-6">
                                            <label class="form-label fw-medium text-secondary small">Ngày sinh</label>
                                            <input type="date" class="form-control bg-light"
                                                th:field="*{dateOfBirth}" />
                                        </div>

                                        <div class="col-12">
                                            <label class="form-label fw-medium text-secondary small">Địa chỉ</label>
                                            <input type="text" class="form-control bg-light" th:field="*{addressLine}"
                                                placeholder="Số nhà, tên đường..." />
                                        </div>

                                        <div class="col-md-6">
                                            <label class="form-label fw-medium text-secondary small">Thành
                                                phố/Tỉnh</label>
                                            <input type="text" class="form-control bg-light" th:field="*{city}" />
                                        </div>

                                        <div class="col-md-6">
                                            <label class="form-label fw-medium text-secondary small">Quốc gia</label>
                                            <input type="text" class="form-control bg-light" th:field="*{country}" />
                                        </div>
                                    </div>

                                    <div class="d-flex justify-content-end gap-2 mt-4">
                                        <a th:href="@{/customer/dashboard}"
                                            class="btn btn-light fw-medium px-4 rounded-3 text-muted">Hủy</a>
                                        <button type="submit" class="btn btn-primary fw-bold px-4 rounded-3 shadow-sm">
                                            Lưu thay đổi
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div th:replace="~{fragments/footer :: footer}"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>